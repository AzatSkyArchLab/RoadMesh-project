# RoadMesh Base Configuration
# Override with specific configs for data/model

project:
  name: roadmesh
  version: 0.1.0

data:
  tile_size: 512
  tile_provider: esri
  cache_dir: ./data/cache
  raw_dir: ./data/raw
  processed_dir: ./data/processed
  default_zoom: 18
  train_split: 0.8
  val_split: 0.1
  test_split: 0.1
  
  augmentations:
    horizontal_flip: true
    vertical_flip: true
    rotate_90: true
    rotate_limit: 15
    brightness_contrast: true
    brightness_limit: 0.2
    contrast_limit: 0.2
    blur_limit: 3
    noise: true

model:
  architecture: dlinknet34
  input_size: 512
  num_classes: 1
  pretrained_backbone: true
  dropout: 0.2
  checkpoint_path: null

training:
  batch_size: 4
  num_workers: 4
  epochs: 100
  learning_rate: 0.0001
  weight_decay: 0.00001
  mixed_precision: true
  gradient_accumulation: 2
  gradient_checkpointing: false
  early_stopping_patience: 15
  early_stopping_min_delta: 0.001
  scheduler_type: cosine
  warmup_epochs: 5
  bce_weight: 0.5
  dice_weight: 0.3
  connectivity_weight: 0.2
  checkpoint_dir: ./checkpoints
  save_top_k: 3

inference:
  batch_size: 8
  tile_overlap: 64
  confidence_threshold: 0.5
  use_tta: false

geometry:
  simplify_tolerance: 1.5
  min_polygon_area: 50.0
  snap_tolerance: 2.0
  buffer_distance: 0.0
  default_crs: "EPSG:4326"
  working_crs: "EPSG:3857"

api:
  host: 0.0.0.0
  port: 8000
  workers: 4
  tile_cache_size: 1000
  request_timeout: 60
  max_bbox_area: 0.01
  cors_origins: ["*"]
  api_key_required: false

logging:
  level: INFO
  format: console
  log_file: null
